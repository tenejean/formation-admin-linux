<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jour 21 - Gestion de disques sous Linux</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border-radius: 20px;
            margin-top: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        
        .header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .nav {
            background: #34495e;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }
        
        .nav a {
            color: #ecf0f1;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .nav a:hover {
            background: #3498db;
            transform: translateY(-2px);
        }
        
        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #3498db;
            transition: transform 0.3s ease;
        }
        
        .section:hover {
            transform: translateY(-5px);
        }
        
        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section h3 {
            color: #34495e;
            margin: 25px 0 15px 0;
            font-size: 1.4em;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 5px;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .code-block::before {
            content: '$ ';
            color: #3498db;
            font-weight: bold;
        }
        
        .command {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .output {
            background: #ecf0f1;
            color: #2c3e50;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            border-left: 4px solid #3498db;
        }
        
        .warning {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }
        
        .warning::before {
            content: '‚ö†Ô∏è ';
            font-size: 1.2em;
        }
        
        .info {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(116, 185, 255, 0.3);
        }
        
        .info::before {
            content: '‚ÑπÔ∏è ';
            font-size: 1.2em;
        }
        
        .tip {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 184, 148, 0.3);
        }
        
        .tip::before {
            content: 'üí° ';
            font-size: 1.2em;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }
        
        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .exercise {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 10px 25px rgba(162, 155, 254, 0.3);
        }
        
        .exercise h3 {
            color: white;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            margin-bottom: 20px;
        }
        
        .icon {
            font-size: 1.5em;
            margin-right: 10px;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .nav ul {
                flex-direction: column;
                gap: 10px;
            }
            
            .section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üñ•Ô∏è Jour 21 - Gestion de disques</h1>
            <p>Formation Administration Syst√®me Linux - Jean Tene</p>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="#introduction">Introduction</a></li>
                <li><a href="#concepts">Concepts de base</a></li>
                <li><a href="#partitionnement">Partitionnement</a></li>
                <li><a href="#systemes-fichiers">Syst√®mes de fichiers</a></li>
                <li><a href="#montage">Montage</a></li>
                <li><a href="#surveillance">Surveillance</a></li>
                <li><a href="#exercices">Exercices</a></li>
            </ul>
        </nav>
        
        <section id="introduction" class="section">
            <h2><span class="icon">üìö</span>Introduction</h2>
            <p>La gestion des disques est une comp√©tence fondamentale pour tout administrateur syst√®me Linux. Elle comprend la compr√©hension des p√©riph√©riques de stockage, le partitionnement, la cr√©ation de syst√®mes de fichiers, le montage et la surveillance de l'espace disque.</p>
            
            <h3>Objectifs du cours</h3>
            <ul>
                <li>Comprendre l'architecture des disques sous Linux</li>
                <li>Ma√Ætriser les outils de partitionnement</li>
                <li>Cr√©er et g√©rer des syst√®mes de fichiers</li>
                <li>Configurer le montage automatique</li>
                <li>Surveiller l'utilisation des disques</li>
            </ul>
        </section>
        
        <section id="concepts" class="section">
            <h2><span class="icon">üîß</span>Concepts de base</h2>
            
            <h3>Types de p√©riph√©riques</h3>
            <p>Sous Linux, les p√©riph√©riques de stockage sont repr√©sent√©s par des fichiers sp√©ciaux dans le r√©pertoire <code>/dev</code>.</p>
            
            <table>
                <tr>
                    <th>Type</th>
                    <th>Convention de nommage</th>
                    <th>Exemple</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>IDE/PATA</td>
                    <td>/dev/hd*</td>
                    <td>/dev/hda1</td>
                    <td>Anciens disques IDE</td>
                </tr>
                <tr>
                    <td>SATA/SCSI/SAS</td>
                    <td>/dev/sd*</td>
                    <td>/dev/sda1</td>
                    <td>Disques modernes</td>
                </tr>
                <tr>
                    <td>NVMe</td>
                    <td>/dev/nvme*</td>
                    <td>/dev/nvme0n1p1</td>
                    <td>SSD NVMe</td>
                </tr>
                <tr>
                    <td>MMC/SD</td>
                    <td>/dev/mmcblk*</td>
                    <td>/dev/mmcblk0p1</td>
                    <td>Cartes SD</td>
                </tr>
            </table>
            
            <h3>Identification des disques</h3>
            <div class="code-block">
                <span class="command">lsblk</span> # Afficher la structure des disques
            </div>
            <div class="output">
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda      8:0    0   20G  0 disk 
‚îú‚îÄsda1   8:1    0    1G  0 part /boot
‚îú‚îÄsda2   8:2    0    2G  0 part [SWAP]
‚îî‚îÄsda3   8:3    0   17G  0 part /
sdb      8:16   0   10G  0 disk 
‚îî‚îÄsdb1   8:17   0   10G  0 part /home
            </div>
            
            <div class="code-block">
                <span class="command">fdisk -l</span> # Lister tous les disques et partitions
            </div>
            
            <div class="code-block">
                <span class="command">blkid</span> # Afficher les UUID et types de syst√®mes de fichiers
            </div>
            <div class="output">
/dev/sda1: UUID="a1b2c3d4-e5f6-7890-abcd-ef1234567890" TYPE="ext4"
/dev/sda2: UUID="12345678-abcd-ef90-1234-567890abcdef" TYPE="swap"
            </div>
        </section>
        
        <section id="partitionnement" class="section">
            <h2><span class="icon">‚úÇÔ∏è</span>Partitionnement</h2>
            
            <h3>Types de tables de partition</h3>
            
            <h4>MBR (Master Boot Record)</h4>
            <ul>
                <li>Maximum 4 partitions primaires</li>
                <li>Une partition √©tendue peut contenir plusieurs partitions logiques</li>
                <li>Limite de 2 To par disque</li>
                <li>Compatible avec les anciens syst√®mes</li>
            </ul>
            
            <h4>GPT (GUID Partition Table)</h4>
            <ul>
                <li>Jusqu'√† 128 partitions</li>
                <li>Support des disques > 2 To</li>
                <li>Redondance des m√©tadonn√©es</li>
                <li>Requis pour UEFI</li>
            </ul>
            
            <h3>Outils de partitionnement</h3>
            
            <h4>fdisk - Outil classique</h4>
            <div class="code-block">
                <span class="command">fdisk /dev/sdb</span> # Ouvrir fdisk pour le disque sdb
            </div>
            
            <div class="info">
                <strong>Commandes principales dans fdisk :</strong><br>
                ‚Ä¢ <code>p</code> : afficher les partitions<br>
                ‚Ä¢ <code>n</code> : cr√©er une nouvelle partition<br>
                ‚Ä¢ <code>d</code> : supprimer une partition<br>
                ‚Ä¢ <code>t</code> : changer le type de partition<br>
                ‚Ä¢ <code>w</code> : √©crire les modifications<br>
                ‚Ä¢ <code>q</code> : quitter sans sauvegarder
            </div>
            
            <h4>parted - Outil moderne</h4>
            <div class="code-block">
                <span class="command">parted /dev/sdb</span>
            </div>
            <div class="code-block">
                <span class="command">parted /dev/sdb mklabel gpt</span> # Cr√©er une table GPT
            </div>
            <div class="code-block">
                <span class="command">parted /dev/sdb mkpart primary ext4 0% 50%</span> # Cr√©er une partition
            </div>
            
            <h4>gdisk - Pour GPT uniquement</h4>
            <div class="code-block">
                <span class="command">gdisk /dev/sdb</span> # Interface similaire √† fdisk pour GPT
            </div>
            
            <div class="warning">
                <strong>Attention :</strong> Le partitionnement d√©truit les donn√©es existantes. Toujours faire des sauvegardes avant toute modification !
            </div>
            
            <h3>Exemple pratique de partitionnement</h3>
            <div class="code-block">
                # Cr√©er une table de partition GPT
                <span class="command">parted /dev/sdb mklabel gpt</span>
                
                # Cr√©er une partition de 10 Go
                <span class="command">parted /dev/sdb mkpart primary ext4 1MiB 10GiB</span>
                
                # Cr√©er une partition pour le reste de l'espace
                <span class="command">parted /dev/sdb mkpart primary ext4 10GiB 100%</span>
                
                # V√©rifier les partitions
                <span class="command">parted /dev/sdb print</span>
            </div>
        </section>
        
        <section id="systemes-fichiers" class="section">
            <h2><span class="icon">üìÅ</span>Syst√®mes de fichiers</h2>
            
            <h3>Types de syst√®mes de fichiers</h3>
            <table>
                <tr>
                    <th>Syst√®me</th>
                    <th>Utilisation</th>
                    <th>Avantages</th>
                    <th>Inconv√©nients</th>
                </tr>
                <tr>
                    <td>ext4</td>
                    <td>Usage g√©n√©ral Linux</td>
                    <td>Stable, journalis√©, performant</td>
                    <td>Pas de compression native</td>
                </tr>
                <tr>
                    <td>xfs</td>
                    <td>Gros volumes, haute performance</td>
                    <td>Tr√®s performant, scalable</td>
                    <td>Pas de r√©duction de taille</td>
                </tr>
                <tr>
                    <td>btrfs</td>
                    <td>Fonctionnalit√©s avanc√©es</td>
                    <td>Snapshots, compression, RAID</td>
                    <td>Moins mature</td>
                </tr>
                <tr>
                    <td>fat32</td>
                    <td>Compatibilit√© multi-OS</td>
                    <td>Universellement support√©</td>
                    <td>Limite 4 Go par fichier</td>
                </tr>
                <tr>
                    <td>ntfs</td>
                    <td>Partitions Windows</td>
                    <td>Fonctionnalit√©s avanc√©es</td>
                    <td>Support Linux limit√©</td>
                </tr>
            </table>
            
            <h3>Cr√©ation de syst√®mes de fichiers</h3>
            
            <h4>ext4</h4>
            <div class="code-block">
                <span class="command">mkfs.ext4 /dev/sdb1</span> # Formatage basique
            </div>
            <div class="code-block">
                <span class="command">mkfs.ext4 -L "MonDisque" /dev/sdb1</span> # Avec label
            </div>
            <div class="code-block">
                <span class="command">mkfs.ext4 -m 1 /dev/sdb1</span> # R√©server 1% pour root
            </div>
            
            <h4>xfs</h4>
            <div class="code-block">
                <span class="command">mkfs.xfs /dev/sdb1</span>
            </div>
            <div class="code-block">
                <span class="command">mkfs.xfs -L "DataDisk" /dev/sdb1</span> # Avec label
            </div>
            
            <h4>btrfs</h4>
            <div class="code-block">
                <span class="command">mkfs.btrfs /dev/sdb1</span>
            </div>
            <div class="code-block">
                <span class="command">mkfs.btrfs -L "BackupDisk" /dev/sdb1</span>
            </div>
            
            <h3>Modification des syst√®mes de fichiers</h3>
            
            <h4>Redimensionnement</h4>
            <div class="code-block">
                # Agrandir un syst√®me ext4 (doit √™tre d√©mont√©)
                <span class="command">resize2fs /dev/sdb1</span>
                
                # Agrandir un syst√®me xfs (doit √™tre mont√©)
                <span class="command">xfs_growfs /point/de/montage</span>
            </div>
            
            <h4>V√©rification et r√©paration</h4>
            <div class="code-block">
                # V√©rifier un syst√®me ext4
                <span class="command">fsck.ext4 /dev/sdb1</span>
                
                # R√©paration automatique
                <span class="command">fsck.ext4 -y /dev/sdb1</span>
                
                # V√©rifier un syst√®me xfs
                <span class="command">xfs_check /dev/sdb1</span>
            </div>
            
            <div class="warning">
                <strong>Important :</strong> Ne jamais utiliser fsck sur un syst√®me de fichiers mont√© ! Cela peut causer une corruption des donn√©es.
            </div>
        </section>
        
        <section id="montage" class="section">
            <h2><span class="icon">üîó</span>Montage des syst√®mes de fichiers</h2>
            
            <h3>Montage manuel</h3>
            <div class="code-block">
                # Cr√©er un point de montage
                <span class="command">mkdir /mnt/mondisque</span>
                
                # Monter le syst√®me de fichiers
                <span class="command">mount /dev/sdb1 /mnt/mondisque</span>
                
                # Monter avec des options sp√©cifiques
                <span class="command">mount -o rw,noatime /dev/sdb1 /mnt/mondisque</span>
                
                # D√©monter
                <span class="command">umount /mnt/mondisque</span>
            </div>
            
            <h3>Options de montage courantes</h3>
            <table>
                <tr>
                    <th>Option</th>
                    <th>Description</th>
                    <th>Utilisation</th>
                </tr>
                <tr>
                    <td>rw / ro</td>
                    <td>Lecture-√©criture / Lecture seule</td>
                    <td>Contr√¥le des permissions</td>
                </tr>
                <tr>
                    <td>noatime</td>
                    <td>Ne pas mettre √† jour l'heure d'acc√®s</td>
                    <td>Am√©liore les performances</td>
                </tr>
                <tr>
                    <td>noexec</td>
                    <td>Interdire l'ex√©cution de fichiers</td>
                    <td>S√©curit√© (temp, home)</td>
                </tr>
                <tr>
                    <td>nosuid</td>
                    <td>Ignorer les bits SUID/SGID</td>
                    <td>S√©curit√©</td>
                </tr>
                <tr>
                    <td>nodev</td>
                    <td>Ignorer les fichiers de p√©riph√©riques</td>
                    <td>S√©curit√©</td>
                </tr>
            </table>
            
            <h3>Montage automatique - /etc/fstab</h3>
            <p>Le fichier <code>/etc/fstab</code> configure le montage automatique des syst√®mes de fichiers au d√©marrage.</p>
            
            <h4>Structure du fichier fstab</h4>
            <div class="output">
# P√©riph√©rique    Point_montage    Type    Options    Dump    Pass
/dev/sda1        /                ext4    defaults   1       1
/dev/sda2        /home            ext4    defaults   1       2
/dev/sda3        none             swap    sw         0       0
UUID=12345-67890 /mnt/data        ext4    noatime    0       2
            </div>
            
            <div class="info">
                <strong>Colonnes de /etc/fstab :</strong><br>
                1. <strong>P√©riph√©rique</strong> : /dev/sdX ou UUID<br>
                2. <strong>Point de montage</strong> : r√©pertoire de destination<br>
                3. <strong>Type</strong> : syst√®me de fichiers<br>
                4. <strong>Options</strong> : options de montage<br>
                5. <strong>Dump</strong> : sauvegarde (0 ou 1)<br>
                6. <strong>Pass</strong> : ordre de v√©rification fsck
            </div>
            
            <h4>Utilisation des UUID</h4>
            <div class="code-block">
                # Obtenir l'UUID d'une partition
                <span class="command">blkid /dev/sdb1</span>
                
                # Utiliser l'UUID dans fstab (recommand√©)
                UUID=a1b2c3d4-e5f6-7890-abcd-ef1234567890 /mnt/data ext4 defaults 0 2
            </div>
            
            <div class="tip">
                <strong>Conseil :</strong> Utilisez toujours les UUID dans /etc/fstab plut√¥t que les noms de p√©riph√©riques, car ces derniers peuvent changer.
            </div>
            
            <h4>Test de la configuration fstab</h4>
            <div class="code-block">
                # Tester le montage de tous les syst√®mes
                <span class="command">mount -a</span>
                
                # Tester un montage sp√©cifique
                <span class="command">mount /mnt/data</span>
            </div>
        </section>
        
        <section id="surveillance" class="section">
            <h2><span class="icon">üìä</span>Surveillance des disques</h2>
            
            <h3>Utilisation de l'espace disque</h3>
            
            <h4>Commande df</h4>
            <div class="code-block">
                <span class="command">df -h</span> # Affichage lisible
            </div>
            <div class="output">
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1        20G   15G  4.2G  79% /
/dev/sda2       100G   45G   50G  48% /home
tmpfs           2.0G     0  2.0G   0% /dev/shm
            </div>
            
            <div class="code-block">
                <span class="command">df -i</span> # Utilisation des inodes
            </div>
            
            <h4>Commande du</h4>
            <div class="code-block">
                <span class="command">du -h /home</span> # Taille d'un r√©pertoire
            </div>
            <div class="code-block">
                <span class="command">du -sh /home/*</span> # Taille de chaque sous-r√©pertoire
            </div>
            <div class="code-block">
                <span class="command">du -h --max-depth=1 /var</span> # Limiter la profondeur
            </div>
            
            <h3>Surveillance des performances</h3>
            
            <h4>iostat</h4>
            <div class="code-block">
                <span class="command">iostat -x 1</span> # Statistiques E/S en temps r√©el
            </div>
            
            <h4>iotop</h4>
            <div class="code-block">
                <span class="command">iotop</span> # Processus utilisant le plus d'E/S
            </div>
            
            <h3>Alertes automatiques</h3>
            <div class="code-block">
                # Script simple d'alerte d'espace disque
                #!/bin/bash
                THRESHOLD=90
                df -h | awk 'NR>1 {print $5 " " $6}' | while read output;
                do
                    usep=$(echo $output | awk '{print $1}' | cut -d'%' -f1)
                    partition=$(echo $output | awk '{print $2}')
                    if [ $usep -ge $THRESHOLD ]; then
                        echo "Alerte: $partition utilise ${usep}% de l'espace"
                    fi
                done
            </div>
            
            <h3>Maintenance pr√©ventive</h3>
            
            <h4>Nettoyage automatique</h4>
            <div class="code-block">
                # Nettoyer les fichiers temporaires
                <span class="command">find /tmp -type f -atime +7 -delete</span>
                
                # Nettoyer les logs anciens
                <span class="command">find /var/log -name "*.log" -type f -mtime +30 -delete</span>
                
                # Vider la corbeille des utilisateurs
                <span class="command">find /home/*/.*local/share/Trash -type f -delete</span>
            </div>
            
            <h4>Rotation des logs</h4>
            <p>Configurer logrotate pour √©viter que les logs consomment tout l'espace disque.</p>
            <div class="code-block">
                # Exemple de configuration logrotate
                /var/log/monapp/*.log {
                    daily
                    rotate 30
                    compress
                    delaycompress
                    missingok
                    notifempty
                    create 0644 root root
                }
            </div>
        </section>
        
        <section id="exercices" class="section exercise">
            <h2><span class="icon">üèãÔ∏è</span>Exercices pratiques</h2>
            
            <h3>Exercice 1 : Partitionnement et formatage</h3>
            <p><strong>Objectif :</strong> Cr√©er et formater une nouvelle partition</p>
            <ol>
                <li>Identifier un disque libre avec <code>lsblk</code></li>
                <li>Cr√©er une table de partition GPT avec <code>parted</code></li>
                <li>Cr√©er une partition de 5 Go</li>
                <li>Formater la partition en ext4</li>
                <li>Attribuer un label "EXERCICE1"</li>
                <li>V√©rifier avec <code>blkid</code></li>
            </ol>
            
            <h3>Exercice 2 : Configuration du montage automatique</h3>
            <p><strong>Objectif :</strong> Configurer le montage automatique dans /etc/fstab</p>
            <ol>
                <li>Cr√©er le point de montage <code>/mnt/exercice</code></li>
                <li>Obtenir l'UUID de la partition cr√©√©e</li>
                <li>Ajouter une entr√©e dans <code>/etc/fstab</code></li>
                <li>Tester avec <code>mount -a</code></li>
                <li>V√©rifier le montage avec <code>df -h</code></li>
                <li>Ajouter l'option <code>noatime</code> pour optimiser les performances</li>
            </ol>
            
            <h3>Exercice 3 : Surveillance et maintenance</h3>
            <p><strong>Objectif :</strong> Mettre en place une surveillance de l'espace disque</p>
            <ol>
                <li>Cr√©er un script de surveillance qui alerte si l'utilisation d√©passe 80%</li>
                <li>Tester le script sur diff√©rentes partitions</li>
                <li>Programmer le script dans crontab pour une ex√©cution quotidienne</li>
                <li>Cr√©er des fichiers de test pour simuler un disque plein</li>
                <li>V√©rifier le fonctionnement des alertes</li>
            </ol>
            
            <h3>Exercice 4 : R√©cup√©ration d'urgence</h3>
            <p><strong>Objectif :</strong> Simuler et r√©soudre des probl√®mes de disque</p>
            <ol>
                <li>D√©monter brutalement un syst√®me de fichiers</li>
                <li>Simuler une corruption avec <code>dd</code></li>
                <li>Utiliser <code>fsck</code> pour r√©parer</li>
                <li>V√©rifier l'int√©grit√© des donn√©es</li>
                <li>Documenter la proc√©dure de r√©cup√©ration</li>
            </ol>
            
            <h3>Solutions des exercices</h3>
            <div class="code-block">
                # Exercice 1 - Solution
                # 1. Identifier les disques
                lsblk
                
                # 2. Cr√©er table GPT
                parted /dev/sdb mklabel gpt
                
                # 3. Cr√©er partition de 5 Go
                parted /dev/sdb mkpart primary ext4 1MiB 5GiB
                
                # 4. Formater en ext4
                mkfs.ext4 /dev/sdb1
                
                # 5. Ajouter un label
                e2label /dev/sdb1 EXERCICE1
                
                # 6. V√©rifier
                blkid /dev/sdb1
            </div>
            
            <div class="code-block">
                # Exercice 2 - Solution
                # 1. Cr√©er point de montage
                mkdir /mnt/exercice
                
                # 2. Obtenir UUID
                blkid /dev/sdb1
                
                # 3. Ajouter dans fstab
                echo "UUID=your-uuid-here /mnt/exercice ext4 defaults,noatime 0 2" >> /etc/fstab
                
                # 4. Tester
                mount -a
                
                # 5. V√©rifier
                df -h
            </div>
        </section>
        
        <section class="section">
            <h2><span class="icon">üìã</span>R√©sum√© et bonnes pratiques</h2>
            
            <h3>Points cl√©s √† retenir</h3>
            <ul>
                <li><strong>Planification :</strong> Toujours planifier la structure des disques avant l'installation</li>
                <li><strong>Sauvegarde :</strong> Sauvegarder les donn√©es avant toute op√©ration de partitionnement</li>
                <li><strong>UUID :</strong> Utiliser les UUID dans /etc/fstab pour √©viter les probl√®mes de nommage</li>
                <li><strong>Surveillance :</strong> Mettre en place une surveillance proactive de l'espace disque</li>
                <li><strong>Maintenance :</strong> Planifier des t√¢ches de maintenance r√©guli√®res</li>
            </ul>
            
            <h3>Bonnes pratiques</h3>
            
            <h4>S√©curit√©</h4>
            <ul>
                <li>Utiliser des options de montage restrictives (noexec, nosuid) pour les partitions non-syst√®me</li>
                <li>S√©parer les donn√©es utilisateur du syst√®me (/home sur une partition s√©par√©e)</li>
                <li>Chiffrer les partitions sensibles</li>
                <li>Contr√¥ler r√©guli√®rement l'int√©grit√© des syst√®mes de fichiers</li>
            </ul>
            
            <h4>Performance</h4>
            <ul>
                <li>Utiliser l'option noatime pour r√©duire les √©critures</li>
                <li>Choisir le syst√®me de fichiers adapt√© √† l'usage (ext4 pour g√©n√©ral, xfs pour gros volumes)</li>
                <li>Aligner les partitions sur les limites des secteurs</li>
                <li>Surveiller les performances I/O avec iostat</li>
            </ul>
            
            <h4>Maintenance</h4>
            <ul>
                <li>Programmer des v√©rifications fsck r√©guli√®res</li>
                <li>Mettre en place la rotation des logs</li>
                <li>Surveiller l'utilisation des inodes</li>
                <li>Documenter la configuration des disques</li>
            </ul>
            
            <div class="tip">
                <strong>Astuce professionnelle :</strong> Gardez toujours un disque de secours avec un syst√®me de r√©cup√©ration bootable. Cela peut vous sauver en cas de probl√®me majeur !
            </div>
        </section>
        
        <section class="section">
            <h2><span class="icon">üîó</span>Commandes de r√©f√©rence rapide</h2>
            
            <h3>Identification et information</h3>
            <div class="code-block">
                lsblk                    # Structure des disques
                fdisk -l                 # Liste des partitions
                blkid                    # UUID et types de FS
                df -h                    # Utilisation des disques
                du -sh /path             # Taille d'un r√©pertoire
            </div>
            
            <h3>Partitionnement</h3>
            <div class="code-block">
                fdisk /dev/sdX           # Partitionnement MBR
                parted /dev/sdX          # Partitionnement GPT
                gdisk /dev/sdX           # Partitionnement GPT (expert)
            </div>
            
            <h3>Syst√®mes de fichiers</h3>
            <div class="code-block">
                mkfs.ext4 /dev/sdX1      # Cr√©er ext4
                mkfs.xfs /dev/sdX1       # Cr√©er xfs
                fsck.ext4 /dev/sdX1      # V√©rifier ext4
                resize2fs /dev/sdX1      # Redimensionner ext4
            </div>
            
            <h3>Montage</h3>
            <div class="code-block">
                mount /dev/sdX1 /mnt     # Monter
                umount /mnt              # D√©monter
                mount -a                 # Monter tout (fstab)
                mount -o remount,rw /    # Remonter avec options
            </div>
            
            <h3>Surveillance</h3>
            <div class="code-block">
                iostat -x 1              # Statistiques I/O
                iotop                    # Processus I/O
                lsof /path               # Fichiers ouverts
                fuser -v /path           # Utilisateurs d'un fichier
            </div>
        </section>
        
        <section class="section">
            <h2><span class="icon">üìö</span>Pour aller plus loin</h2>
            
            <h3>Sujets avanc√©s</h3>
            <ul>
                <li><strong>LVM (Logical Volume Manager) :</strong> Gestion flexible des volumes logiques</li>
                <li><strong>RAID logiciel :</strong> Redondance et performance avec mdadm</li>
                <li><strong>Chiffrement :</strong> LUKS pour prot√©ger les donn√©es sensibles</li>
                <li><strong>Syst√®mes de fichiers distribu√©s :</strong> GlusterFS, Ceph</li>
                <li><strong>Snapshots :</strong> Sauvegardes instantan√©es avec btrfs ou LVM</li>
            </ul>
            
            <h3>Outils compl√©mentaires</h3>
            <ul>
                <li><strong>smartctl :</strong> Surveillance SMART des disques</li>
                <li><strong>hdparm :</strong> Configuration des param√®tres de disque</li>
                <li><strong>badblocks :</strong> Test des secteurs d√©fectueux</li>
                <li><strong>ncdu :</strong> Analyseur d'utilisation disque interactif</li>
                <li><strong>gparted :</strong> Interface graphique pour le partitionnement</li>
            </ul>
            
            <div class="info">
                <strong>Prochaine √©tape :</strong> Le Jour 22 abordera LVM et RAID, des technologies qui s'appuient sur les concepts vus aujourd'hui pour offrir plus de flexibilit√© et de s√©curit√©.
            </div>
        </section>
        
        <footer style="text-align: center; margin-top: 40px; padding: 20px; background: #2c3e50; color: white; border-radius: 10px;">
            <p><strong>Formation Administration Syst√®me Linux - Jour 21</strong></p>
            <p>Responsable : Jean Tene | Cr√©√© avec passion pour l'apprentissage üöÄ</p>
            <p style="font-size: 0.9em; opacity: 0.8;">Ma√Ætrisez les disques, ma√Ætrisez le syst√®me !</p>
        </footer>
    </div>
</body>
</html>
                