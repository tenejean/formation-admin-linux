<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jour 09 - Processus et services</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            font-weight: 300;
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            position: relative;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.4em;
            margin-bottom: 15px;
            margin-top: 25px;
        }

        .section h4 {
            color: #555;
            font-size: 1.2em;
            margin-bottom: 10px;
            margin-top: 20px;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .code-block pre {
            margin: 0;
            white-space: pre-wrap;
        }

        .command {
            background: #34495e;
            color: #e74c3c;
            padding: 8px 12px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            display: inline-block;
            margin: 5px 0;
        }

        .tip {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-left: 5px solid #3498db;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .warning {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border-left: 5px solid #e17055;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .info {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-left: 5px solid #00b894;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .toc h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style: none;
            padding-left: 0;
        }

        .toc li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .toc li:before {
            content: "▶";
            position: absolute;
            left: 0;
            color: #667eea;
        }

        .toc a {
            color: #2c3e50;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .toc a:hover {
            color: #667eea;
        }

        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .exercise {
            background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border-left: 5px solid #e84393;
        }

        .exercise h4 {
            color: #2d3436;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Jour 09 - Processus et services</h1>
            <p class="subtitle">Formation Administration Système Linux</p>
            <p>Responsable : Jean Tene</p>
        </div>

        <div class="content">
            <div class="toc">
                <h3>Table des matières</h3>
                <ul>
                    <li><a href="#introduction">Introduction aux processus</a></li>
                    <li><a href="#types-processus">Types de processus</a></li>
                    <li><a href="#gestion-processus">Gestion des processus</a></li>
                    <li><a href="#monitoring">Monitoring des processus</a></li>
                    <li><a href="#services">Introduction aux services</a></li>
                    <li><a href="#systemd">Systemd et gestion des services</a></li>
                    <li><a href="#init-system">Systèmes d'init</a></li>
                    <li><a href="#exercices">Exercices pratiques</a></li>
                </ul>
            </div>

            <div class="section" id="introduction">
                <h2>1. Introduction aux processus</h2>
                
                <h3>Qu'est-ce qu'un processus ?</h3>
                <p>Un <span class="highlight">processus</span> est une instance d'un programme en cours d'exécution. Chaque processus sous Linux possède un identifiant unique appelé <strong>PID (Process ID)</strong> et dispose de ses propres ressources système (mémoire, fichiers ouverts, etc.).</p>

                <div class="info">
                    <strong>Caractéristiques d'un processus :</strong>
                    <ul>
                        <li><strong>PID</strong> : Identifiant unique du processus</li>
                        <li><strong>PPID</strong> : PID du processus parent</li>
                        <li><strong>UID/GID</strong> : Identifiants utilisateur et groupe</li>
                        <li><strong>État</strong> : Running, Sleeping, Zombie, etc.</li>
                        <li><strong>Ressources</strong> : Mémoire, CPU, fichiers ouverts</li>
                    </ul>
                </div>

                <h3>Hiérarchie des processus</h3>
                <p>Sous Linux, les processus sont organisés en arbre hiérarchique. Le processus <strong>init</strong> (PID 1) est le processus parent de tous les autres processus.</p>

                <div class="code-block">
                    <pre># Afficher l'arbre des processus
pstree

# Afficher l'arbre avec les PID
pstree -p

# Afficher uniquement les processus d'un utilisateur
pstree username</pre>
                </div>
            </div>

            <div class="section" id="types-processus">
                <h2>2. Types de processus</h2>

                <h3>Processus en premier plan (Foreground)</h3>
                <p>Les processus en premier plan sont ceux qui s'exécutent directement dans le terminal et qui peuvent recevoir des entrées de l'utilisateur.</p>

                <h3>Processus en arrière-plan (Background)</h3>
                <p>Les processus en arrière-plan s'exécutent sans interaction directe avec l'utilisateur. On peut les lancer en ajoutant <code>&</code> à la fin de la commande.</p>

                <div class="code-block">
                    <pre># Lancer un processus en arrière-plan
command &

# Exemple : lancer un téléchargement en arrière-plan
wget http://example.com/file.zip &</pre>
                </div>

                <h3>Processus démons (Daemons)</h3>
                <p>Les démons sont des processus qui s'exécutent en arrière-plan de manière continue, généralement sans interface utilisateur. Ils fournissent des services système.</p>

                <div class="tip">
                    <strong>Convention de nommage :</strong> Les démons ont souvent un nom se terminant par 'd' (httpd, sshd, mysqld, etc.)
                </div>

                <table>
                    <tr>
                        <th>État du processus</th>
                        <th>Code</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>Running</td>
                        <td>R</td>
                        <td>Processus en cours d'exécution</td>
                    </tr>
                    <tr>
                        <td>Sleeping</td>
                        <td>S</td>
                        <td>Processus en attente</td>
                    </tr>
                    <tr>
                        <td>Uninterruptible Sleep</td>
                        <td>D</td>
                        <td>Processus en attente non interruptible</td>
                    </tr>
                    <tr>
                        <td>Zombie</td>
                        <td>Z</td>
                        <td>Processus terminé mais non nettoyé</td>
                    </tr>
                    <tr>
                        <td>Stopped</td>
                        <td>T</td>
                        <td>Processus arrêté</td>
                    </tr>
                </table>
            </div>

            <div class="section" id="gestion-processus">
                <h2>3. Gestion des processus</h2>

                <h3>Commandes de base</h3>

                <h4>ps - Afficher les processus</h4>
                <div class="code-block">
                    <pre># Afficher les processus de l'utilisateur actuel
ps

# Afficher tous les processus
ps aux

# Afficher les processus en format long
ps -ef

# Afficher les processus d'un utilisateur spécifique
ps -u username

# Afficher les processus avec arbre hiérarchique
ps --forest</pre>
                </div>

                <h4>top et htop - Monitoring en temps réel</h4>
                <div class="code-block">
                    <pre># Affichage temps réel des processus
top

# Version améliorée de top (si installé)
htop

# Options utiles dans top :
# q : quitter
# k : tuer un processus
# r : changer la priorité
# P : trier par CPU
# M : trier par mémoire</pre>
                </div>

                <h3>Contrôle des processus</h3>

                <h4>Signaux</h4>
                <p>Les signaux sont utilisés pour communiquer avec les processus. Voici les principaux signaux :</p>

                <table>
                    <tr>
                        <th>Signal</th>
                        <th>Numéro</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>SIGTERM</td>
                        <td>15</td>
                        <td>Demande d'arrêt propre</td>
                    </tr>
                    <tr>
                        <td>SIGKILL</td>
                        <td>9</td>
                        <td>Arrêt forcé immédiat</td>
                    </tr>
                    <tr>
                        <td>SIGSTOP</td>
                        <td>19</td>
                        <td>Suspension du processus</td>
                    </tr>
                    <tr>
                        <td>SIGCONT</td>
                        <td>18</td>
                        <td>Reprise du processus</td>
                    </tr>
                    <tr>
                        <td>SIGHUP</td>
                        <td>1</td>
                        <td>Rechargement de configuration</td>
                    </tr>
                </table>

                <h4>kill - Envoyer des signaux</h4>
                <div class="code-block">
                    <pre># Terminer un processus proprement
kill PID

# Forcer l'arrêt d'un processus
kill -9 PID
kill -KILL PID

# Suspendre un processus
kill -STOP PID

# Reprendre un processus suspendu
kill -CONT PID

# Tuer tous les processus d'un nom donné
killall process_name

# Tuer tous les processus d'un utilisateur
killall -u username</pre>
                </div>

                <h4>Gestion des tâches (jobs)</h4>
                <div class="code-block">
                    <pre># Lancer une commande en arrière-plan
command &

# Suspendre le processus actuel
Ctrl+Z

# Voir les tâches en cours
jobs

# Reprendre une tâche en premier plan
fg %job_number

# Reprendre une tâche en arrière-plan
bg %job_number

# Détacher une tâche du terminal
nohup command &
disown %job_number</pre>
                </div>

                <h3>Priorités des processus</h3>
                <p>Chaque processus a une priorité qui détermine l'allocation des ressources CPU.</p>

                <div class="code-block">
                    <pre># Lancer un processus avec une priorité modifiée
nice -n 10 command

# Modifier la priorité d'un processus existant
renice 5 PID

# Valeurs de nice : -20 (priorité max) à +19 (priorité min)
# Seul root peut définir des valeurs négatives</pre>
                </div>
            </div>

            <div class="section" id="monitoring">
                <h2>4. Monitoring des processus</h2>

                <h3>Commandes avancées de monitoring</h3>

                <h4>pgrep et pkill</h4>
                <div class="code-block">
                    <pre># Trouver les PID des processus par nom
pgrep firefox

# Tuer tous les processus d'un nom donné
pkill firefox

# Options utiles
pgrep -f "pattern"  # Recherche dans la ligne de commande complète
pgrep -u username   # Processus d'un utilisateur spécifique
pgrep -x exact_name # Correspondance exacte</pre>
                </div>

                <h4>lsof - Lister les fichiers ouverts</h4>
                <div class="code-block">
                    <pre># Voir tous les fichiers ouverts
lsof

# Fichiers ouverts par un processus
lsof -p PID

# Processus utilisant un fichier
lsof /path/to/file

# Processus utilisant un port
lsof -i :80

# Processus d'un utilisateur
lsof -u username</pre>
                </div>

                <h4>pstree - Arbre des processus</h4>
                <div class="code-block">
                    <pre># Afficher l'arbre complet
pstree

# Avec les PID
pstree -p

# Avec les arguments
pstree -a

# Pour un utilisateur spécifique
pstree username</pre>
                </div>
            </div>

            <div class="section" id="services">
                <h2>5. Introduction aux services</h2>

                <h3>Qu'est-ce qu'un service ?</h3>
                <p>Un <span class="highlight">service</span> est un programme qui s'exécute en arrière-plan et fournit des fonctionnalités spécifiques au système ou aux utilisateurs. Les services sont gérés par le système d'init.</p>

                <div class="info">
                    <strong>Exemples de services courants :</strong>
                    <ul>
                        <li><strong>sshd</strong> : Service SSH pour les connexions distantes</li>
                        <li><strong>httpd/apache2</strong> : Serveur web Apache</li>
                        <li><strong>mysqld</strong> : Serveur de base de données MySQL</li>
                        <li><strong>cron</strong> : Planificateur de tâches</li>
                        <li><strong>rsyslog</strong> : Gestion des logs système</li>
                    </ul>
                </div>

                <h3>Caractéristiques des services</h3>
                <ul>
                    <li><strong>Démarrage automatique</strong> : Au boot du système</li>
                    <li><strong>Fonctionnement continu</strong> : Disponibles en permanence</li>
                    <li><strong>Gestion centralisée</strong> : Contrôlés par le système d'init</li>
                    <li><strong>Logs</strong> : Enregistrement des activités</li>
                    <li><strong>Configuration</strong> : Fichiers de configuration dédiés</li>
                </ul>
            </div>

            <div class="section" id="systemd">
                <h2>6. Systemd et gestion des services</h2>

                <h3>Introduction à systemd</h3>
                <p><strong>systemd</strong> est le système d'init moderne utilisé par la plupart des distributions Linux actuelles. Il remplace les anciens systèmes SysV init.</p>

                <h3>systemctl - Contrôle des services</h3>

                <h4>Commandes de base</h4>
                <div class="code-block">
                    <pre># Démarrer un service
systemctl start service_name

# Arrêter un service
systemctl stop service_name

# Redémarrer un service
systemctl restart service_name

# Recharger la configuration d'un service
systemctl reload service_name

# Vérifier l'état d'un service
systemctl status service_name

# Voir si un service est actif
systemctl is-active service_name

# Voir si un service est activé au démarrage
systemctl is-enabled service_name</pre>
                </div>

                <h4>Gestion du démarrage automatique</h4>
                <div class="code-block">
                    <pre># Activer un service au démarrage
systemctl enable service_name

# Désactiver un service au démarrage
systemctl disable service_name

# Activer et démarrer immédiatement
systemctl enable --now service_name

# Désactiver et arrêter immédiatement
systemctl disable --now service_name</pre>
                </div>

                <h4>Listing et recherche</h4>
                <div class="code-block">
                    <pre># Lister tous les services
systemctl list-units --type=service

# Lister les services actifs
systemctl list-units --type=service --state=active

# Lister les services en échec
systemctl list-units --type=service --state=failed

# Lister les services activés au démarrage
systemctl list-unit-files --type=service --state=enabled</pre>
                </div>

                <h3>Unités systemd</h3>
                <p>systemd gère différents types d'unités :</p>

                <table>
                    <tr>
                        <th>Type d'unité</th>
                        <th>Extension</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>Service</td>
                        <td>.service</td>
                        <td>Services système</td>
                    </tr>
                    <tr>
                        <td>Socket</td>
                        <td>.socket</td>
                        <td>Sockets réseau/IPC</td>
                    </tr>
                    <tr>
                        <td>Target</td>
                        <td>.target</td>
                        <td>Groupes d'unités</td>
                    </tr>
                    <tr>
                        <td>Timer</td>
                        <td>.timer</td>
                        <td>Tâches planifiées</td>
                    </tr>
                    <tr>
                        <td>Mount</td>
                        <td>.mount</td>
                        <td>Points de montage</td>
                    </tr>
                </table>

                <h3>Fichiers de configuration</h3>
                <p>Les fichiers de configuration des services systemd sont situés dans :</p>
                <ul>
                    <li><code>/etc/systemd/system/</code> - Configuration locale</li>
                    <li><code>/usr/lib/systemd/system/</code> - Configuration système</li>
                    <li><code>/run/systemd/system/</code> - Configuration runtime</li>
                </ul>

                <div class="code-block">
                    <pre># Exemple de fichier service simple (/etc/systemd/system/myapp.service)
[Unit]
Description=Mon Application
After=network.target

[Service]
Type=simple
User=myuser
WorkingDirectory=/opt/myapp
ExecStart=/opt/myapp/bin/myapp
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target</pre>
                </div>

                <h3>Logs avec journalctl</h3>
                <div class="code-block">
                    <pre># Voir les logs d'un service
journalctl -u service_name

# Suivre les logs en temps réel
journalctl -u service_name -f

# Logs depuis un moment donné
journalctl -u service_name --since "2024-01-01"

# Logs avec priorité
journalctl -u service_name -p err

# Logs du boot actuel
journalctl -b

# Taille des logs
journalctl --disk-usage</pre>
                </div>
            </div>

            <div class="section" id="init-system">
                <h2>7. Systèmes d'init</h2>

                <h3>Comparaison des systèmes d'init</h3>

                <table>
                    <tr>
                        <th>Système</th>
                        <th>Distributions</th>
                        <th>Caractéristiques</th>
                    </tr>
                    <tr>
                        <td>systemd</td>
                        <td>Ubuntu, CentOS, Fedora, Debian</td>
                        <td>Moderne, parallélisation, gestion avancée</td>
                    </tr>
                    <tr>
                        <td>SysV init</td>
                        <td>Anciennes versions</td>
                        <td>Scripts de démarrage séquentiels</td>
                    </tr>
                    <tr>
                        <td>Upstart</td>
                        <td>Anciennes versions Ubuntu</td>
                        <td>Basé sur les événements</td>
                    </tr>
                    <tr>
                        <td>OpenRC</td>
                        <td>Gentoo, Alpine</td>
                        <td>Léger, compatible POSIX</td>
                    </tr>
                </table>

                <h3>Niveaux d'exécution (Runlevels)</h3>
                <p>Concept traditionnel des niveaux d'exécution :</p>

                <table>
                    <tr>
                        <th>Niveau</th>
                        <th>Description</th>
                        <th>Équivalent systemd</th>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>Arrêt du système</td>
                        <td>poweroff.target</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Mode mono-utilisateur</td>
                        <td>rescue.target</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Multi-utilisateur sans réseau</td>
                        <td>multi-user.target</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Multi-utilisateur avec réseau</td>
                        <td>multi-user.target</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Mode graphique</td>
                        <td>graphical.target</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Redémarrage</td>
                        <td>reboot.target</td>
                    </tr>
                </table>

                <div class="code-block">
                    <pre># Changer de target avec systemd
systemctl isolate multi-user.target
systemctl isolate graphical.target

# Définir le target par défaut
systemctl set-default multi-user.target
systemctl set-default graphical.target

# Voir le target actuel
systemctl get-default</pre>
                </div>
            </div>

            <div class="section" id="exercices">
                <h2>8. Exercices pratiques</h2>

                <div class="exercise">
                    <h4>Exercice 1 : Exploration des processus</h4>
                    <p><strong>Objectif :</strong> Comprendre et analyser les processus en cours d'exécution</p>
                    <ol>
                        <li>Affichez tous les processus de votre système avec <code>ps aux</code></li>
                        <li>Identifiez le processus consommant le plus de CPU</li>
                        <li>Affichez l'arbre des processus avec <code>pstree</code></li>
                        <li>Lancez <code>top</code> et identifiez les 5 processus les plus gourmands</li>
                        <li>Trouvez le PID du processus init</li>
                    </ol>
                </div>

                <div class="exercise">
                    <h4>Exercice 2 : Gestion des tâches</h4>
                    <p><strong>Objectif :</strong> Maîtriser le contrôle des processus</p>
                    <ol>
                        <li>Lancez <code>sleep 300</code> en arrière-plan</li>
                        <li>Vérifiez les tâches actives avec <code>jobs</code></li>
                        <li>Suspendez la tâche avec <code>kill -STOP</code></li>
                        <li>Reprenez la tâche avec <code>kill -CONT</code></li>
                        <li>Terminez la tâche proprement</li>
                    </ol>
                </div>

                <div class="exercise">
                    <h4>Exercice 3 : Gestion des services</h4>
                    <p><strong>Objectif :</strong> Administrer les services systemd</p>
                    <ol>
                        <li>Listez tous les services actifs avec <code>systemctl</code></li>
                        <li>Vérifiez l'état du service SSH</li>
                        <li>Consultez les logs du service SSH</li>
                        <li>Redémarrez le service SSH (si autorisé)</li>
                        <li>Vérifiez quels services sont activés au démarrage</li>
                    </ol>
                </div>

                <div class="exercise">
                    <h4>Exercice 4 : Création d'un service personnalisé</h4>
                    <p><strong>Objectif :</strong> Créer et gérer un service custom</p>
                    <ol>
                        <li>Créez un script simple qui écrit l'heure dans un fichier toutes les 10 secondes</li>
                        <li>Créez un fichier de service systemd pour ce script</li>
                        <li>Activez et démarrez le service</li>
                        <li>Vérifiez son fonctionnement</li>
                        <li>Consultez ses logs</li>
                    </ol>
                </div>

                <div class="exercise">
                    <h4>Exercice 5 : Diagnostic et dépannage</h4>
                    <p><strong>Objectif :</strong> Diagnostiquer les problèmes de processus</p>
                    <ol>
                        <li>Lancez plusieurs processus <code>yes</code> en arrière-plan</li>
                        <li>Observez leur impact sur le système avec <code>top</code></li>
                        <li>Tuez tous les processus <code>yes</code> d'un coup</li>
                        <li>Vérifiez s'il reste des processus zombies</li>
                        <li>Identifiez les processus utilisant le plus de mémoire</li>
                    </ol>
                </div>

                <div class="warning">
                    <strong>Attention :</strong> 
                    <ul>
                        <li>Soyez prudent avec les commandes <code>kill -9</code></li>
                        <li>Ne tuez pas les processus système critiques</li>
                        <li>Testez les services sur un environnement de test</li>
                        <li>Sauvegardez les configurations avant modification</li>
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2>9. Commandes de référence rapide</h2>

                <h3>Gestion des processus</h3>
                <div class="code-block">
                    <pre># Affichage des processus
ps aux                  # Tous les processus
ps -ef                  # Format étendu
ps -u username          # Processus d'un utilisateur
pstree                  # Arbre des processus
top                     # Monitoring temps réel
htop                    # Version améliorée de top

# Recherche de processus
pgrep pattern           # Trouver PID par nom
pkill pattern           # Tuer par nom
pidof program           # PID d'un programme

# Contrôle des processus
kill PID                # Terminer (SIGTERM)
kill -9 PID             # Forcer l'arrêt (SIGKILL)
kill -STOP PID          # Suspendre
kill -CONT PID          # Reprendre
killall program         # Tuer tous les processus du nom

# Gestion des tâches
command &               # Lancer en arrière-plan
jobs                    # Lister les tâches
fg %1                   # Reprendre en premier plan
bg %1                   # Reprendre en arrière-plan
nohup command &         # Détacher du terminal</pre>
                </div>

                <h3>Gestion des services (systemd)</h3>
                <div class="code-block">
                    <pre># Contrôle des services
systemctl start service         # Démarrer
systemctl stop service          # Arrêter
systemctl restart service       # Redémarrer
systemctl reload service        # Recharger config
systemctl status service        # État du service

# Démarrage automatique
systemctl enable service        # Activer au boot
systemctl disable service       # Désactiver au boot
systemctl enable --now service  # Activer et démarrer

# Informations
systemctl list-units --type=service           # Tous les services
systemctl list-units --type=service --state=active  # Services actifs
systemctl list-unit-files --type=service      # Fichiers de services
systemctl is-active service                   # Vérifier si actif
systemctl is-enabled service                  # Vérifier si activé

# Logs
journalctl -u service           # Logs d'un service
journalctl -u service -f        # Suivre les logs
journalctl -u service --since today  # Logs d'aujourd'hui
journalctl -b                   # Logs du boot actuel</pre>
                </div>

                <h3>Monitoring avancé</h3>
                <div class="code-block">
                    <pre># Fichiers ouverts
lsof                    # Tous les fichiers ouverts
lsof -p PID             # Fichiers d'un processus
lsof -u username        # Fichiers d'un utilisateur
lsof -i :80             # Processus utilisant le port 80
lsof /path/to/file      # Processus utilisant un fichier

# Informations système
uptime                  # Charge système
free -h                 # Mémoire disponible
df -h                   # Espace disque
iostat                  # Statistiques I/O
vmstat                  # Statistiques mémoire virtuelle</pre>
                </div>
            </div>

            <div class="section">
                <h2>10. Bonnes pratiques</h2>

                <h3>Sécurité</h3>
                <ul>
                    <li><strong>Principe de moindre privilège</strong> : Exécutez les services avec les permissions minimales</li>
                    <li><strong>Utilisateurs dédiés</strong> : Créez des utilisateurs spécifiques pour chaque service</li>
                    <li><strong>Monitoring</strong> : Surveillez régulièrement les processus anormaux</li>
                    <li><strong>Logs</strong> : Consultez régulièrement les logs des services</li>
                </ul>

                <h3>Performance</h3>
                <ul>
                    <li><strong>Priorités</strong> : Ajustez les priorités des processus critiques</li>
                    <li><strong>Ressources</strong> : Limitez l'utilisation des ressources si nécessaire</li>
                    <li><strong>Démarrage</strong> : Optimisez les services au démarrage</li>
                    <li><strong>Nettoyage</strong> : Éliminez les processus zombies</li>
                </ul>

                <h3>Maintenance</h3>
                <ul>
                    <li><strong>Documentation</strong> : Documentez les services personnalisés</li>
                    <li><strong>Sauvegarde</strong> : Sauvegardez les configurations</li>
                    <li><strong>Tests</strong> : Testez les modifications sur un environnement de test</li>
                    <li><strong>Monitoring</strong> : Mettez en place une surveillance continue</li>
                </ul>
            </div>

            <div class="section">
                <h2>11. Troubleshooting courant</h2>

                <h3>Problèmes fréquents</h3>

                <h4>Service qui ne démarre pas</h4>
                <div class="code-block">
                    <pre># Vérifier l'état du service
systemctl status service_name

# Consulter les logs
journalctl -u service_name

# Vérifier la configuration
systemctl cat service_name

# Recharger la configuration systemd
systemctl daemon-reload</pre>
                </div>

                <h4>Processus zombie</h4>
                <div class="code-block">
                    <pre># Identifier les processus zombies
ps aux | grep zombie
ps aux | awk '$8 ~ /^Z/ { print $2 }'

# Trouver le processus parent
ps -o ppid= -p PID_zombie

# Redémarrer le processus parent ou le système si nécessaire</pre>
                </div>

                <h4>Consommation excessive de ressources</h4>
                <div class="code-block">
                    <pre># Identifier les processus gourmands
top -o %CPU
top -o %MEM

# Limiter les ressources (si disponible)
systemctl edit service_name
# Ajouter :
# [Service]
# CPUQuota=50%
# MemoryLimit=1G</pre>
                </div>
            </div>

            <div class="section">
                <h2>12. Ressources et documentation</h2>

                <h3>Pages de manuel</h3>
                <ul>
                    <li><code>man ps</code> - Affichage des processus</li>
                    <li><code>man kill</code> - Envoi de signaux</li>
                    <li><code>man systemctl</code> - Contrôle systemd</li>
                    <li><code>man journalctl</code> - Consultation des logs</li>
                    <li><code>man systemd.service</code> - Format des fichiers service</li>
                </ul>

                <h3>Fichiers de configuration importants</h3>
                <ul>
                    <li><code>/etc/systemd/system/</code> - Services personnalisés</li>
                    <li><code>/proc/</code> - Informations des processus</li>
                    <li><code>/var/log/</code> - Logs système</li>
                </ul>

                <div class="tip">
                    <strong>Conseil :</strong> Consultez régulièrement la documentation officielle de systemd et les pages de manuel pour approfondir vos connaissances.
                </div>
            </div>

            <div class="nav-buttons">
                <a href="#" class="btn">← Jour 08 - Installation de logiciels</a>
                <a href="#" class="btn">Jour 10 - Éditeurs de texte →</a>
            </div>
        </div>
    </div>
</body>
</html>