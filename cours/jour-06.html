<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation Administration Système Linux - Jour 6 - Gestion des utilisateurs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
            border-radius: 15px;
            overflow: hidden;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 2px,
                rgba(255,255,255,0.05) 2px,
                rgba(255,255,255,0.05) 4px
            );
            animation: slide 20s linear infinite;
        }
        
        @keyframes slide {
            0% { transform: translateX(-50px); }
            100% { transform: translateX(50px); }
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .author-info {
            background: #34495e;
            color: white;
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .content {
            padding: 40px;
        }
        
        .toc {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 40px;
            border-left: 5px solid #3498db;
        }
        
        .toc h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .toc ol {
            list-style: none;
            counter-reset: toc-counter;
        }
        
        .toc li {
            counter-increment: toc-counter;
            margin-bottom: 8px;
            padding-left: 30px;
            position: relative;
        }
        
        .toc li::before {
            content: counter(toc-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #3498db;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            position: relative;
        }
        
        .section h3 {
            color: #34495e;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
            position: relative;
            padding-left: 20px;
        }
        
        .section h3::before {
            content: '▶';
            position: absolute;
            left: 0;
            color: #3498db;
        }
        
        .section h4 {
            color: #7f8c8d;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(116, 185, 255, 0.3);
        }
        
        .highlight-box h4 {
            color: white;
            margin-bottom: 15px;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(253, 203, 110, 0.3);
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            border-left: 4px solid #4299e1;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .code-block code {
            color: #81c784;
        }
        
        .command-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .command-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .command-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .command-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .command-table tr:hover {
            background-color: #e3f2fd;
            transition: background-color 0.3s ease;
        }
        
        .tp-section {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border: 2px solid #81c784;
        }
        
        .tp-section h3 {
            color: #2e7d32;
            margin-bottom: 15px;
        }
        
        .tp-section ol {
            padding-left: 20px;
        }
        
        .tp-section li {
            margin-bottom: 8px;
            color: #1b5e20;
        }
        
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 5px;
        }
        
        .important-note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 5px solid #fdcb6e;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .conclusion {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            color: #2c3e50;
        }
        
        .resources {
            background: #f1f3f4;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
        }
        
        .footer {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 20px 40px;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header, .content, .footer {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .author-info {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Formation Administration Système Linux</h1>
            <div class="subtitle">Jour 6 - Gestion des utilisateurs</div>
        </div>
        
        <div class="author-info">
            <div><strong>Auteur:</strong> Jean Tene</div>
            <div><strong>Date:</strong> Mai 2025</div>
        </div>
        
        <div class="content">
            <div class="toc">
                <h2>Table des matières</h2>
                <ol>
                    <li>Introduction à la gestion des utilisateurs</li>
                    <li>Concepts fondamentaux</li>
                    <li>Fichiers de configuration</li>
                    <li>Création et gestion des utilisateurs</li>
                    <li>Création et gestion des groupes</li>
                    <li>Gestion des mots de passe</li>
                    <li>Contrôle d'accès et sécurité</li>
                    <li>Quotas utilisateurs</li>
                    <li>Surveillance et audit</li>
                    <li>Automatisation de la gestion des utilisateurs</li>
                    <li>Travaux pratiques</li>
                    <li>Conclusion</li>
                    <li>Références et ressources supplémentaires</li>
                </ol>
            </div>
            
            <div class="section">
                <h2>1. Introduction à la gestion des utilisateurs</h2>
                
                <h3>Importance de la gestion des utilisateurs sous Linux</h3>
                <p>La gestion des utilisateurs est un aspect fondamental de l'administration système Linux pour plusieurs raisons:</p>
                
                <div class="highlight-box">
                    <h4>Points clés</h4>
                    <ul>
                        <li><strong>Sécurité:</strong> Permet de contrôler qui a accès au système et à quelles ressources</li>
                        <li><strong>Responsabilité:</strong> Permet de suivre les actions effectuées sur le système</li>
                        <li><strong>Isolation:</strong> Empêche les utilisateurs d'interférer avec les fichiers et processus des autres</li>
                        <li><strong>Organisation:</strong> Facilite la structuration des ressources et des responsabilités</li>
                    </ul>
                </div>
                
                <h3>Principes de base de la gestion des utilisateurs sous Linux</h3>
                <ul>
                    <li><strong>Multiutilisateur:</strong> Linux est conçu dès le départ comme un système multiutilisateur</li>
                    <li><strong>Séparation des privilèges:</strong> Distinction claire entre les utilisateurs normaux et les administrateurs</li>
                    <li><strong>Moindre privilège:</strong> Les utilisateurs ne doivent avoir que les droits nécessaires à leurs tâches</li>
                    <li><strong>Héritage d'UNIX:</strong> La gestion des utilisateurs suit la tradition UNIX avec UID, GID et permissions</li>
                </ul>
            </div>
            
            <div class="section">
                <h2>2. Concepts fondamentaux</h2>
                
                <h3>Utilisateurs, groupes et permissions</h3>
                
                <h4>Utilisateurs (Users)</h4>
                <p><strong>Définition:</strong> Entité à laquelle est associée une identité unique sur le système</p>
                
                <div class="highlight-box">
                    <h4>Types d'utilisateurs</h4>
                    <ul>
                        <li><strong>Utilisateurs système:</strong> Utilisés par les services et démons (UID < 1000 typiquement)</li>
                        <li><strong>Utilisateurs réguliers:</strong> Comptes pour les personnes physiques (UID ≥ 1000 typiquement)</li>
                        <li><strong>Superutilisateur (root):</strong> Administrateur avec tous les privilèges (UID 0)</li>
                    </ul>
                </div>
                
                <h4>Groupes (Groups)</h4>
                <p><strong>Définition:</strong> Collection d'utilisateurs partageant certains privilèges</p>
                
                <ul>
                    <li><strong>Groupe primaire:</strong> Groupe principal associé à un utilisateur</li>
                    <li><strong>Groupes secondaires:</strong> Groupes additionnels auxquels un utilisateur appartient</li>
                    <li><strong>Groupes système:</strong> Utilisés pour les services et applications</li>
                </ul>
                
                <h4>Identifiants numériques</h4>
                <div class="important-note">
                    <p><strong>UID (User ID):</strong> Identifiant numérique unique pour chaque utilisateur</p>
                    <ul>
                        <li>0: root</li>
                        <li>1-999: utilisateurs système (selon la distribution)</li>
                        <li>≥1000: utilisateurs réguliers</li>
                    </ul>
                    <p><strong>GID (Group ID):</strong> Identifiant numérique unique pour chaque groupe</p>
                </div>
                
                <h4>Relation entre utilisateurs et groupes</h4>
                <p>Chaque utilisateur:</p>
                <ul>
                    <li>Possède un UID unique</li>
                    <li>Appartient à un groupe primaire</li>
                    <li>Peut appartenir à plusieurs groupes secondaires</li>
                    <li>A un répertoire personnel (/home/username habituellement)</li>
                    <li>A un shell de connexion défini</li>
                </ul>
            </div>
            
            <div class="section">
                <h2>3. Fichiers de configuration</h2>
                
                <h3>Fichiers principaux pour la gestion des utilisateurs</h3>
                
                <h4>/etc/passwd</h4>
                <p>Contient les informations de base sur tous les utilisateurs:</p>
                
                <div class="code-block">
                    <code>username:x:UID:GID:GECOS:home_directory:shell</code>
                    <br><br>
                    <strong>Exemple:</strong><br>
                    <code>john:x:1001:1001:John Doe,,,:/home/john:/bin/bash</code>
                </div>
                
                <ul>
                    <li><strong>username:</strong> Nom de l'utilisateur</li>
                    <li><strong>x:</strong> Emplacement du mot de passe (archivé dans /etc/shadow)</li>
                    <li><strong>UID:</strong> Identifiant numérique de l'utilisateur</li>
                    <li><strong>GID:</strong> Identifiant du groupe primaire</li>
                    <li><strong>GECOS:</strong> Informations complémentaires (nom complet, téléphone, etc.)</li>
                    <li><strong>home_directory:</strong> Répertoire personnel</li>
                    <li><strong>shell:</strong> Shell de connexion (interpréteur de commandes)</li>
                </ul>
                
                <h4>/etc/shadow</h4>
                <p>Contient les mots de passe cryptés et les informations de sécurité:</p>
                
                <div class="code-block">
                    <code>username:encrypted_password:lastchange:min:max:warn:inactive:expire:reserved</code>
                    <br><br>
                    <strong>Exemple:</strong><br>
                    <code>john:$6$xyz$abcdef...:18734:0:99999:7:14:18736:</code>
                </div>
                
                <ul>
                    <li><strong>username:</strong> Nom de l'utilisateur</li>
                    <li><strong>encrypted_password:</strong> Mot de passe chiffré</li>
                    <li><strong>lastchange:</strong> Dernier changement de mot de passe (jours depuis 01/01/1970)</li>
                    <li><strong>min:</strong> Âge minimum du mot de passe (jours avant autorisation de changement)</li>
                    <li><strong>max:</strong> Âge maximum du mot de passe (jours avant expiration)</li>
                    <li><strong>warn:</strong> Période d'avertissement avant expiration (jours)</li>
                    <li><strong>inactive:</strong> Période d'inactivité avant désactivation (jours)</li>
                    <li><strong>expire:</strong> Date d'expiration du compte (jours depuis 01/01/1970)</li>
                </ul>
                
                <h4>/etc/group</h4>
                <p>Contient les informations sur les groupes:</p>
                
                <div class="code-block">
                    <code>groupname:x:GID:user_list</code>
                    <br><br>
                    <strong>Exemple:</strong><br>
                    <code>developers:x:1002:john,alice,bob</code>
                </div>
                
                <ul>
                    <li><strong>groupname:</strong> Nom du groupe</li>
                    <li><strong>x:</strong> Mot de passe du groupe (rarement utilisé)</li>
                    <li><strong>GID:</strong> Identifiant numérique du groupe</li>
                    <li><strong>user_list:</strong> Liste des utilisateurs membres, séparés par des virgules</li>
                </ul>
                
                <h4>/etc/gshadow</h4>
                <p>Contient les mots de passe des groupes (rarement utilisé):</p>
                
                <div class="code-block">
                    <code>groupname:encrypted_password:administrators:members</code>
                </div>
                
                <h4>Autres fichiers importants</h4>
                <ul>
                    <li><strong>/etc/login.defs:</strong> Paramètres par défaut pour la création de comptes</li>
                    <li><strong>/etc/default/useradd:</strong> Valeurs par défaut pour la commande useradd</li>
                    <li><strong>/etc/skel/:</strong> Contient les fichiers copiés dans le répertoire personnel d'un nouvel utilisateur</li>
                </ul>
            </div>
            
            <div class="section">
                <h2>4. Création et gestion des utilisateurs</h2>
                
                <h3>Commandes de base pour la gestion des utilisateurs</h3>
                
                <h4>Création d'utilisateurs</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>groups</code></td>
                        <td>Montre les groupes d'un utilisateur</td>
                        <td><code>groups johnsmith</code></td>
                    </tr>
                    <tr>
                        <td><code>getent group</code></td>
                        <td>Affiche les informations d'un groupe</td>
                        <td><code>getent group developers</code></td>
                    </tr>
                </table>
                
                <div class="warning-box">
                    <h4>Bonnes pratiques pour la gestion des groupes</h4>
                    <ul>
                        <li>Créer des groupes basés sur les rôles ou les fonctions</li>
                        <li>Utiliser des groupes pour gérer les permissions de fichiers et répertoires</li>
                        <li>Éviter d'attribuer trop de privilèges à un groupe</li>
                        <li>Documenter la fonction de chaque groupe</li>
                        <li>Limiter l'appartenance au groupe sudo/wheel aux administrateurs système</li>
                    </ul>
                </div>
            </div>
            
            <div class="section">
                <h2>6. Gestion des mots de passe</h2>
                
                <h3>Politiques de mots de passe</h3>
                
                <h4>Configuration de la politique de mots de passe</h4>
                <p>La politique de mots de passe peut être configurée dans:</p>
                <ul>
                    <li><strong>/etc/login.defs:</strong> Paramètres généraux</li>
                    <li><strong>/etc/pam.d/common-password</strong> ou similaire: Configuration PAM pour la complexité</li>
                </ul>
                
                <div class="highlight-box">
                    <h4>Paramètres importants</h4>
                    <ul>
                        <li><strong>PASS_MAX_DAYS:</strong> Durée de validité maximale du mot de passe</li>
                        <li><strong>PASS_MIN_DAYS:</strong> Période minimale entre changements de mot de passe</li>
                        <li><strong>PASS_MIN_LEN:</strong> Longueur minimale du mot de passe</li>
                        <li><strong>PASS_WARN_AGE:</strong> Période d'avertissement avant expiration</li>
                    </ul>
                </div>
                
                <h4>Commandes de gestion des mots de passe</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>passwd</code></td>
                        <td>Change le mot de passe d'un utilisateur</td>
                        <td><code>passwd johnsmith</code></td>
                    </tr>
                    <tr>
                        <td><code>chage</code></td>
                        <td>Change les informations d'expiration d'un mot de passe</td>
                        <td><code>chage -l johnsmith</code></td>
                    </tr>
                </table>
                
                <div class="highlight-box">
                    <h4>Options importantes pour chage</h4>
                    <ul>
                        <li><strong>-l:</strong> Affiche les informations d'expiration</li>
                        <li><strong>-d jours:</strong> Définit la date du dernier changement</li>
                        <li><strong>-m jours:</strong> Définit la durée minimale</li>
                        <li><strong>-M jours:</strong> Définit la durée maximale</li>
                        <li><strong>-W jours:</strong> Définit la période d'avertissement</li>
                        <li><strong>-E date:</strong> Définit la date d'expiration du compte</li>
                    </ul>
                </div>
                
                <h3>Renforcement de la sécurité des mots de passe</h3>
                
                <h4>Utilisation de PAM (Pluggable Authentication Modules)</h4>
                <p>PAM permet de configurer des règles complexes pour les mots de passe:</p>
                
                <p>Installation de libpam-pwquality ou similaire:</p>
                <div class="code-block">
                    <code>apt install libpam-pwquality # Debian/Ubuntu</code><br>
                    <code>dnf install pam_pwquality # RHEL/Fedora</code>
                </div>
                
                <p>Configuration dans /etc/security/pwquality.conf ou /etc/pam.d/common-password :</p>
                <div class="code-block">
                    <code>minlen=12 # Longueur minimale</code><br>
                    <code>minclass=3 # Nombre de classes de caractères (minuscules, majuscules, chiffres, spéciaux)</code><br>
                    <code>maxrepeat=3 # Maximum de répétitions consécutives</code><br>
                    <code>dcredit=1 # Bonus pour les chiffres</code><br>
                    <code>ucredit=1 # Bonus pour les majuscules</code><br>
                    <code>lcredit=0 # Bonus pour les minuscules</code><br>
                    <code>ocredit=1 # Bonus pour les caractères spéciaux</code>
                </div>
                
                <div class="warning-box">
                    <h4>Utilisation de mots de passe forts</h4>
                    <p>Recommandations pour des mots de passe robustes:</p>
                    <ul>
                        <li>Longueur minimale de 12 caractères</li>
                        <li>Mélange de majuscules, minuscules, chiffres et caractères spéciaux</li>
                        <li>Éviter les mots du dictionnaire, noms propres, dates</li>
                        <li>Utiliser des phrases de passe plutôt que des mots de passe simples</li>
                        <li>Changer régulièrement les mots de passe</li>
                    </ul>
                </div>
            </div>
            
            <div class="section">
                <h2>7. Contrôle d'accès et sécurité</h2>
                
                <h3>sudo et privilèges d'administration</h3>
                
                <h4>Configuration de sudo</h4>
                <p>Le fichier principal est <strong>/etc/sudoers</strong>, modifiable avec la commande <code>visudo</code> :</p>
                
                <p>Format général:</p>
                <div class="code-block">
                    <code>utilisateur hôte=(utilisateur_cible:groupe_cible) commandes</code>
                </div>
                
                <div class="code-block">
                    <code># Membres du groupe sudo peuvent exécuter n'importe quelle commande</code><br>
                    <code>%sudo ALL=(ALL:ALL) ALL</code><br><br>
                    <code># Permettre à un utilisateur spécifique d'exécuter certaines commandes sans mot de passe</code><br>
                    <code>johnsmith ALL=(ALL) NOPASSWD: /sbin/shutdown, /usr/bin/apt</code>
                </div>
                
                <h4>Utilisation de sudo</h4>
                <ul>
                    <li><code>sudo commande</code> : Exécute une commande avec les privilèges root</li>
                    <li><code>sudo -i</code> ou <code>sudo -s</code> : Ouvre un shell avec les privilèges root</li>
                    <li><code>sudo -l</code> : Liste les commandes autorisées pour l'utilisateur courant</li>
                </ul>
                
                <h3>Limitation d'accès aux utilisateurs</h3>
                
                <h4>Configuration des heures d'accès</h4>
                <p>Avec PAM, on peut restreindre les heures de connexion:</p>
                
                <p>Dans /etc/security/time.conf :</p>
                <div class="code-block">
                    <code>login;*;johnsmith;Al0800-1800</code>
                </div>
                
                <h4>Restriction des services</h4>
                <p>Limitation de l'accès SSH dans /etc/ssh/sshd_config :</p>
                <div class="code-block">
                    <code>AllowUsers admin johnsmith</code><br>
                    <code>AllowGroups sshusers</code>
                </div>
                
                <h4>Configuration des commandes autorisées</h4>
                <p>Limitation des commandes disponibles:</p>
                <ul>
                    <li>Utilisation d'un shell restreint comme rbash</li>
                    <li>Configuration précise dans sudoers</li>
                </ul>
            </div>
            
            <div class="section">
                <h2>8. Quotas utilisateurs</h2>
                
                <h3>Installation et configuration des quotas</h3>
                
                <h4>Installation des outils de quota</h4>
                <div class="code-block">
                    <code>apt install quota quotatool # Debian/Ubuntu</code><br>
                    <code>dnf install quota # RHEL/Fedora</code>
                </div>
                
                <h4>Activation des quotas dans /etc/fstab</h4>
                <div class="code-block">
                    <code>/dev/sda1 /home ext4 defaults,usrquota,grpquota 0 2</code>
                </div>
                
                <h4>Initialisation des quotas</h4>
                <div class="code-block">
                    <code>mount -o remount /home</code><br>
                    <code>quotacheck -cugm /home</code><br>
                    <code>quotaon -v /home</code>
                </div>
                
                <h3>Gestion des quotas utilisateurs</h3>
                
                <h4>Définition des quotas</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>edquota</code></td>
                        <td>Édite les quotas d'un utilisateur</td>
                        <td><code>edquota johnsmith</code></td>
                    </tr>
                    <tr>
                        <td><code>setquota</code></td>
                        <td>Définit les quotas en ligne de commande</td>
                        <td><code>setquota -u johnsmith 5000000 6000000 0 0 /home</code></td>
                    </tr>
                </table>
                
                <p>Pour les quotas de groupe:</p>
                <div class="code-block">
                    <code>edquota -g developers</code>
                </div>
                
                <h4>Vérification des quotas</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>quota</code></td>
                        <td>Affiche les quotas d'un utilisateur</td>
                        <td><code>quota -v johnsmith</code></td>
                    </tr>
                    <tr>
                        <td><code>repquota</code></td>
                        <td>Rapport sur les quotas</td>
                        <td><code>repquota -a</code></td>
                    </tr>
                </table>
                
                <div class="highlight-box">
                    <h4>Types de quotas</h4>
                    <ul>
                        <li><strong>Limites souples (soft limits):</strong> Peuvent être dépassées temporairement</li>
                        <li><strong>Limites dures (hard limits):</strong> Ne peuvent jamais être dépassées</li>
                        <li><strong>Période de grâce:</strong> Durée pendant laquelle une limite souple peut être dépassée</li>
                    </ul>
                </div>
            </div>
            
            <div class="section">
                <h2>9. Surveillance et audit</h2>
                
                <h3>Suivi des connexions</h3>
                
                <h4>Journaux de connexion</h4>
                <ul>
                    <li><strong>/var/log/auth.log</strong> ou <strong>/var/log/secure:</strong> Authentifications et autorisations</li>
                    <li><strong>/var/log/wtmp:</strong> Historique des connexions (utilisé par last)</li>
                    <li><strong>/var/log/btmp:</strong> Tentatives de connexion échouées (utilisé par lastb)</li>
                </ul>
                
                <h4>Commandes de surveillance</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>last</code></td>
                        <td>Affiche les dernières connexions</td>
                        <td><code>last -10</code></td>
                    </tr>
                    <tr>
                        <td><code>lastb</code></td>
                        <td>Affiche les tentatives de connexion échouées</td>
                        <td><code>lastb</code></td>
                    </tr>
                    <tr>
                        <td><code>lastlog</code></td>
                        <td>Affiche la dernière connexion de chaque utilisateur</td>
                        <td><code>lastlog</code></td>
                    </tr>
                </table>
                
                <h3>Audit des activités utilisateur</h3>
                
                <h4>Configuration d'auditd</h4>
                <p>Installation d'auditd:</p>
                <div class="code-block">
                    <code>apt install auditd audispd-plugins # Debian/Ubuntu</code><br>
                    <code>dnf install audit # RHEL/Fedora</code>
                </div>
                
                <p>Configuration de règles d'audit dans /etc/audit/rules.d/audit.rules :</p>
                <div class="code-block">
                    <code># Surveiller les modifications dans /etc</code><br>
                    <code>-w /etc/ -p wa -k etc_changes</code><br><br>
                    <code># Surveiller les commandes sudo</code><br>
                    <code>-w /usr/bin/sudo -p x -k sudo_usage</code>
                </div>
                
                <h4>Consultation des logs d'audit</h4>
                <div class="code-block">
                    <code>ausearch -k etc_changes # Recherche par mot-clé</code><br>
                    <code>aureport --auth # Rapport d'authentification</code>
                </div>
            </div>
            
            <div class="section">
                <h2>10. Automatisation de la gestion des utilisateurs</h2>
                
                <h3>Scripts de création en masse</h3>
                
                <h4>Exemple de script pour créer plusieurs utilisateurs</h4>
                <div class="code-block">
                    <code>#!/bin/bash</code><br>
                    <code># Script de création d'utilisateurs en masse à partir d'un fichier CSV</code><br>
                    <code># Format: username,fullname,groups,password</code><br><br>
                    
                    <code>CSV_FILE="$1"</code><br><br>
                    
                    <code>if [ ! -f "$CSV_FILE" ]; then</code><br>
                    <code>    echo "Fichier introuvable: $CSV_FILE"</code><br>
                    <code>    exit 1</code><br>
                    <code>fi</code><br><br>
                    
                    <code>while IFS=, read -r username fullname groups password</code><br>
                    <code>do</code><br>
                    <code>    # Vérifier si l'utilisateur existe déjà</code><br>
                    <code>    if id "$username" &>/dev/null; then</code><br>
                    <code>        echo "L'utilisateur $username existe déjà, ignoré."</code><br>
                    <code>        continue</code><br>
                    <code>    fi</code><br><br>
                    
                    <code>    # Créer l'utilisateur</code><br>
                    <code>    useradd -m -c "$fullname" -s /bin/bash "$username"</code><br><br>
                    
                    <code>    # Définir le mot de passe</code><br>
                    <code>    echo "$username:$password" | chpasswd</code><br><br>
                    
                    <code>    # Ajouter aux groupes</code><br>
                    <code>    if [ ! -z "$groups" ]; then</code><br>
                    <code>        usermod -aG "$groups" "$username"</code><br>
                    <code>    fi</code><br><br>
                    
                    <code>    echo "Utilisateur $username créé avec succès."</code><br>
                    <code>done < "$CSV_FILE"</code>
                </div>
                
                <h3>Intégration avec LDAP/Active Directory</h3>
                
                <h4>Installation des packages nécessaires</h4>
                <div class="code-block">
                    <code># Pour LDAP</code><br>
                    <code>apt install libpam-ldap nscd # Debian/Ubuntu</code><br>
                    <code>dnf install sssd # RHEL/Fedora</code><br><br>
                    
                    <code># Pour Active Directory</code><br>
                    <code>apt install realmd sssd sssd-tools libnss-sss libpam-sss adcli samba-common-bin</code>
                </div>
                
                <h4>Configuration LDAP de base</h4>
                <p>Dans /etc/ldap.conf ou /etc/ldap/ldap.conf :</p>
                <div class="code-block">
                    <code>BASE dc=example,dc=com</code><br>
                    <code>URI ldap://ldap.example.com</code><br>
                    <code>TLS_CACERTDIR /etc/ssl/certs</code>
                </div>
                
                <p>Dans /etc/nsswitch.conf :</p>
                <div class="code-block">
                    <code>passwd: files ldap</code><br>
                    <code>group: files ldap</code><br>
                    <code>shadow: files ldap</code>
                </div>
                
                <h4>Intégration à Active Directory</h4>
                <div class="code-block">
                    <code>realm join ad.example.com -U admin</code>
                </div>
                
                <p>Configuration dans /etc/sssd/sssd.conf :</p>
                <div class="code-block">
                    <code>[sssd]</code><br>
                    <code>domains = ad.example.com</code><br>
                    <code>config_file_version = 2</code><br>
                    <code>services = nss, pam</code><br><br>
                    
                    <code>[domain/ad.example.com]</code><br>
                    <code>id_provider = ad</code><br>
                    <code>access_provider = ad</code>
                </div>
            </div>
            
            <div class="section">
                <h2>11. Travaux pratiques</h2>
                
                <div class="tp-section">
                    <h3>TP 1: Création et gestion d'utilisateurs</h3>
                    <ol>
                        <li>Créez un utilisateur normal <strong>student1</strong> avec:
                            <ul>
                                <li>Mot de passe: P@ssw0rd123</li>
                                <li>Shell: /bin/bash</li>
                                <li>Répertoire personnel: /home/student1</li>
                                <li>Commentaire: "Student User 1"</li>
                            </ul>
                        </li>
                        <li>Vérifiez que l'utilisateur a été correctement créé</li>
                        <li>Modifiez le shell de l'utilisateur pour /bin/zsh</li>
                        <li>Verrouillez le compte, puis déverrouillez-le</li>
                        <li>Configurez une date d'expiration dans 30 jours</li>
                    </ol>
                </div>
                
                <div class="tp-section">
                    <h3>TP 2: Groupes et permissions</h3>
                    <ol>
                        <li>Créez deux groupes: <strong>developers</strong> et <strong>testers</strong></li>
                        <li>Ajoutez l'utilisateur student1 aux deux groupes</li>
                        <li>Créez un répertoire /opt/project avec:
                            <ul>
                                <li>Propriétaire: root</li>
                                <li>Groupe: developers</li>
                                <li>Permissions: lecture/écriture pour le propriétaire et le groupe, lecture seule pour les autres</li>
                            </ul>
                        </li>
                        <li>Vérifiez que student1 peut créer des fichiers dans ce répertoire</li>
                    </ol>
                </div>
                
                <div class="tp-section">
                    <h3>TP 3: Configuration de sudo</h3>
                    <ol>
                        <li>Accordez à student1 le droit d'exécuter uniquement les commandes <code>apt update</code> et <code>apt upgrade</code> avec sudo sans mot de passe</li>
                        <li>Testez la configuration</li>
                        <li>Vérifiez que l'utilisateur ne peut pas exécuter d'autres commandes privilégiées</li>
                    </ol>
                </div>
                
                <div class="tp-section">
                    <h3>TP 4: Configuration des quotas</h3>
                    <ol>
                        <li>Activez les quotas sur le système de fichiers /home</li>
                        <li>Configurez pour student1 :
                            <ul>
                                <li>Limite souple: 500MB</li>
                                <li>Limite dure: 600MB</li>
                                <li>Période de grâce: 7 jours</li>
                            </ul>
                        </li>
                        <li>Vérifiez la configuration</li>
                        <li>Testez le dépassement de la limite souple</li>
                    </ol>
                </div>
                
                <div class="tp-section">
                    <h3>TP 5: Automatisation</h3>
                    <ol>
                        <li>Écrivez un script qui crée 5 utilisateurs (<strong>user1</strong> à <strong>user5</strong>) avec des mots de passe aléatoires</li>
                        <li>Le script doit sauvegarder les informations de connexion dans un fichier sécurisé</li>
                        <li>Configurez ces utilisateurs pour qu'ils doivent changer leur mot de passe à la première connexion</li>
                    </ol>
                </div>
            </div>
            
            <div class="conclusion">
                <h2>12. Conclusion</h2>
                <p>La gestion efficace des utilisateurs est une compétence fondamentale pour tout administrateur système Linux. Dans ce cours, nous avons:</p>
                
                <ul>
                    <li>Exploré les concepts de base de la gestion des utilisateurs et des groupes sous Linux</li>
                    <li>Étudié les fichiers de configuration essentiels et leur structure</li>
                    <li>Appris à utiliser les commandes de gestion des utilisateurs et des groupes</li>
                    <li>Mis en place des politiques de sécurité pour les mots de passe</li>
                    <li>Configuré des privilèges d'administration avec sudo</li>
                    <li>Mis en œuvre des quotas utilisateurs</li>
                    <li>Exploré les techniques de surveillance et d'audit</li>
                    <li>Découvert des méthodes d'automatisation pour la gestion des utilisateurs</li>
                </ul>
                
                <p>Ces connaissances permettent d'établir une base solide pour la sécurité et l'organisation d'un système Linux, qu'il s'agisse d'un serveur d'entreprise ou d'une machine personnelle.</p>
            </div>
            
            <div class="resources">
                <h2>13. Références et ressources supplémentaires</h2>
                
                <h3>Documentation officielle</h3>
                <ul>
                    <li>Manuel des pages man de Linux</li>
                    <li>Documentation PAM</li>
                    <li>Documentation SSSD</li>
                </ul>
                
                <h3>Livres recommandés</h3>
                <ul>
                    <li>"Linux Administration Handbook" par Evi Nemeth et al.</li>
                    <li>"Mastering Linux User Administration" par Ahmed Alkabary</li>
                </ul>
                
                <h3>Ressources en ligne</h3>
                <ul>
                    <li>Linux User and Group Management (Arch Wiki)</li>
                    <li>Linux Foundation Training: User Management</li>
                    <li>Red Hat System Administration Guide: Managing Users and Groups</li>
                </ul>
                
                <h3>Exercices pour le prochain cours</h3>
                <ol>
                    <li>Configurer un système de mots de passe à usage unique (OTP) pour les utilisateurs privilégiés</li>
                    <li>Mettre en place une stratégie de rotation automatique des mots de passe</li>
                    <li>Explorer l'utilisation de PAM pour restreindre les connexions en fonction de critères personnalisés</li>
                    <li>Configurer une base de données LDAP simple et y intégrer un système Linux</li>
                    <li>Mettre en place une politique d'audit avancée pour suivre toutes les actions administratives</li>
                </ol>
            </div>
        </div>
        
        <div class="footer">
            <p>© 2025 - Formation Administration Système Linux - Jean Tene</p>
        </div>
    </div>
</body>
</html>
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>useradd</code></td>
                        <td>Crée un nouvel utilisateur</td>
                        <td><code>useradd -m -s /bin/bash johnsmith</code></td>
                    </tr>
                    <tr>
                        <td><code>adduser</code></td>
                        <td>Interface interactive pour useradd (sur certaines distributions)</td>
                        <td><code>adduser johnsmith</code></td>
                    </tr>
                </table>
                
                <div class="highlight-box">
                    <h4>Options importantes pour useradd</h4>
                    <ul>
                        <li><strong>-m:</strong> Crée le répertoire personnel</li>
                        <li><strong>-s shell:</strong> Définit le shell de connexion</li>
                        <li><strong>-G groupe1,groupe2:</strong> Ajoute l'utilisateur à des groupes supplémentaires</li>
                        <li><strong>-c "commentaire":</strong> Ajoute un commentaire (champ GECOS)</li>
                        <li><strong>-d répertoire:</strong> Spécifie un répertoire personnel différent</li>
                        <li><strong>-e AAAA-MM-JJ:</strong> Définit une date d'expiration du compte</li>
                        <li><strong>-u UID:</strong> Spécifie un UID particulier</li>
                    </ul>
                </div>
                
                <h4>Modification d'utilisateurs</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>usermod</code></td>
                        <td>Modifie un compte utilisateur existant</td>
                        <td><code>usermod -aG sudo johnsmith</code></td>
                    </tr>
                </table>
                
                <div class="highlight-box">
                    <h4>Options importantes pour usermod</h4>
                    <ul>
                        <li><strong>-l nouveau_nom:</strong> Change le nom d'utilisateur</li>
                        <li><strong>-d répertoire:</strong> Change le répertoire personnel</li>
                        <li><strong>-s shell:</strong> Change le shell de connexion</li>
                        <li><strong>-aG groupe:</strong> Ajoute l'utilisateur à un groupe supplémentaire</li>
                        <li><strong>-L:</strong> Verrouille le compte</li>
                        <li><strong>-U:</strong> Déverrouille le compte</li>
                        <li><strong>-e date:</strong> Change la date d'expiration</li>
                    </ul>
                </div>
                
                <h4>Suppression d'utilisateurs</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>userdel</code></td>
                        <td>Supprime un utilisateur</td>
                        <td><code>userdel -r johnsmith</code></td>
                    </tr>
                </table>
                
                <div class="important-note">
                    <p><strong>Options importantes:</strong></p>
                    <ul>
                        <li><strong>-r:</strong> Supprime également le répertoire personnel et les fichiers de l'utilisateur</li>
                        <li><strong>-f:</strong> Force la suppression même si l'utilisateur est connecté</li>
                    </ul>
                </div>
                
                <h4>Autres commandes utiles</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>id</code></td>
                        <td>Affiche les informations d'identification d'un utilisateur</td>
                        <td><code>id johnsmith</code></td>
                    </tr>
                    <tr>
                        <td><code>su</code></td>
                        <td>Change d'utilisateur</td>
                        <td><code>su - johnsmith</code></td>
                    </tr>
                    <tr>
                        <td><code>who</code></td>
                        <td>Affiche les utilisateurs connectés</td>
                        <td><code>who</code></td>
                    </tr>
                    <tr>
                        <td><code>w</code></td>
                        <td>Affiche les utilisateurs connectés et leur activité</td>
                        <td><code>w</code></td>
                    </tr>
                    <tr>
                        <td><code>last</code></td>
                        <td>Montre les dernières connexions</td>
                        <td><code>last johnsmith</code></td>
                    </tr>
                </table>
                
                <h4>Utilisateur système vs utilisateur régulier</h4>
                <p>Pour créer un utilisateur système:</p>
                
                <div class="code-block">
                    <code>useradd -r -s /usr/sbin/nologin nom_service</code>
                </div>
                
                <ul>
                    <li><strong>-r:</strong> Crée un compte système avec UID dans la plage système</li>
                    <li><strong>-s /usr/sbin/nologin:</strong> Définit un shell qui empêche les connexions interactives</li>
                </ul>
            </div>
            
            <div class="section">
                <h2>5. Création et gestion des groupes</h2>
                
                <h3>Commandes de base pour la gestion des groupes</h3>
                
                <h4>Création de groupes</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>groupadd</code></td>
                        <td>Crée un nouveau groupe</td>
                        <td><code>groupadd developers</code></td>
                    </tr>
                    <tr>
                        <td><code>addgroup</code></td>
                        <td>Interface interactive pour groupadd (sur certaines distributions)</td>
                        <td><code>addgroup developers</code></td>
                    </tr>
                </table>
                
                <div class="highlight-box">
                    <h4>Options importantes</h4>
                    <ul>
                        <li><strong>-g GID:</strong> Spécifie un GID particulier</li>
                        <li><strong>-r:</strong> Crée un groupe système</li>
                    </ul>
                </div>
                
                <h4>Modification de groupes</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>groupmod</code></td>
                        <td>Modifie un groupe existant</td>
                        <td><code>groupmod -n new_name old_name</code></td>
                    </tr>
                </table>
                
                <div class="highlight-box">
                    <h4>Options importantes</h4>
                    <ul>
                        <li><strong>-n nouveau_nom:</strong> Change le nom du groupe</li>
                        <li><strong>-g GID:</strong> Change le GID du groupe</li>
                    </ul>
                </div>
                
                <h4>Suppression de groupes</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>groupdel</code></td>
                        <td>Supprime un groupe</td>
                        <td><code>groupdel developers</code></td>
                    </tr>
                </table>
                
                <h4>Gestion des membres du groupe</h4>
                
                <table class="command-table">
                    <tr>
                        <th>Commande</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>gpasswd</code></td>
                        <td>Administre les membres d'un groupe</td>
                        <td><code>gpasswd -a user group</code></td>
                    </tr>
                </table>
                
                <div class="highlight-box">
                    <h4>Options importantes</h4>
                    <ul>
                        <li><strong>-a user:</strong> Ajoute un utilisateur au groupe</li>
                        <li><strong>-d user:</strong> Supprime un utilisateur du groupe</li>
                        <li><strong>-A user1,user2:</strong> Définit les administrateurs du groupe</li>
                    </ul>
                </div>
                
                <h4>Affichage des groupes</h4>
                
                <table class="command-table">